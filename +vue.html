<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vueå¯»å®å†’é™©æ¸¸æˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* å¯¼èˆªæ æ ·å¼ */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 15px 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .nav-brand {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-link.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* é¡µé¢å®¹å™¨æ ·å¼ */
        .page-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-height: 600px;
        }

        /* æ¸¸æˆåŒºåŸŸæ ·å¼ */
        .game-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .progress-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .progress-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            font-weight: bold;
        }

        .steps-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background 0.3s ease;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .step-card.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .step-card.completed {
            background: rgba(46, 204, 113, 0.2);
        }

        .step-card.failed {
            background: rgba(231, 76, 60, 0.2);
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .step-content {
            flex-grow: 1;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .step-status {
            font-style: italic;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(1px);
        }

        button:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .treasure-result {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-top: 20px;
            animation: fadeIn 1s ease;
        }

        .treasure-image {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .event-log {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .event-log h3 {
            margin-bottom: 10px;
            text-align: center;
        }

        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        /* ç”¨æˆ·ç®¡ç†é¡µé¢æ ·å¼ */
        .user-management {
            max-width: 500px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .form-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.2);
        }

        .user-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* æ’è¡Œæ¦œé¡µé¢æ ·å¼ */
        .leaderboard {
            max-width: 800px;
            margin: 0 auto;
        }

        .leaderboard-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px 20px;
            transition: transform 0.2s;
        }

        .leaderboard-item:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .leaderboard-rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .leaderboard-user {
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .leaderboard-score {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .top-1 .leaderboard-rank {
            background: linear-gradient(90deg, #ffd700, #ff8a00);
        }

        .top-2 .leaderboard-rank {
            background: linear-gradient(90deg, #c0c0c0, #a0a0a0);
        }

        .top-3 .leaderboard-rank {
            background: linear-gradient(90deg, #cd7f32, #a56a2a);
        }

        @media (max-width: 768px) {
            .steps-container {
                grid-template-columns: 1fr;
            }

            .navbar {
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div id="app"></div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        // æ¨¡æ‹Ÿå®è—åœ°å›¾API
        class TreasureMap {
            static getInitialClue() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve("åœ¨å¤è€çš„å›¾ä¹¦é¦†é‡Œæ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªçº¿ç´¢ï¼šä¸€å¼ æ³›é»„çš„åœ°å›¾ï¼Œä¸Šé¢æ ‡è®°ç€'æœˆå…‰ç¥åº™'çš„ä½ç½®...");
                    }, 2000);
                });
            }

            static decodeAncientScript(clue) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (!clue) {
                            reject("æ²¡æœ‰çº¿ç´¢å¯ä»¥è§£ç !");
                        }

                        // éšæœºäº‹ä»¶ï¼š30%å‡ ç‡é‡åˆ°è§£ç å›°éš¾
                        if (Math.random() < 0.3) {
                            reject("ç³Ÿç³•ï¼è§£ç å™¨å‡ºç°äº†æ•…éšœï¼Œéœ€è¦å¯»æ‰¾æ›¿ä»£æ–¹æ³•...");
                        } else {
                            resolve("è§£ç æˆåŠŸ!åœ°å›¾æ˜¾ç¤ºå®è—åœ¨ä¸€åº§åä¸º'æœˆå…‰ç¥åº™'çš„å¤è€å»ºç­‘ä¸­ï¼Œå…¥å£è¢«è—¤è”“è¦†ç›–...");
                        }
                    }, 2500);
                });
            }

            static searchTemple(location) {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const random = Math.random();
                        if (random < 0.4) {
                            reject("ç³Ÿç³•!é‡åˆ°äº†ç¥åº™å®ˆå«!ä½ ä¸å¾—ä¸æš‚æ—¶æ’¤é€€...");
                        } else if (random < 0.7) {
                            resolve("æˆåŠŸæ½œå…¥ç¥åº™!åœ¨ç¥­å›åé¢æ‰¾åˆ°äº†ä¸€ä¸ªç¥ç§˜çš„ç®±å­...");
                        } else {
                            // ç‰¹æ®Šäº‹ä»¶ï¼šå‘ç°éšè—é€šé“
                            resolve("åœ¨èº²é¿å®ˆå«æ—¶ï¼Œä½ æ„å¤–å‘ç°äº†ä¸€æ¡éšè—é€šé“!é€šé“å°½å¤´æœ‰ä¸€ä¸ªæ›´åŠ å¤è€çš„å®ç®±...");
                        }
                    }, 3000);
                });
            }

            static openTreasureBox() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // éšæœºå®è—ç±»å‹
                        const treasures = [
                            "æ­å–œ!ä½ æ‰¾åˆ°äº†ä¼ è¯´ä¸­çš„'æ˜Ÿè¾°ä¹‹æ³ª'å®çŸ³!",
                            "å¤ªæ£’äº†!å®ç®±é‡Œè£…æ»¡äº†å¤ä»£é‡‘å¸å’Œç å®!",
                            "æƒŠäººå‘ç°!ä½ æ‰¾åˆ°äº†å¤±ä¼ å·²ä¹…çš„'æ™ºæ…§ä¹‹ä¹¦'!",
                            "å®è—æ˜¯ä¸€æŠŠé•¶åµŒç€å®çŸ³çš„å¤è€é’¥åŒ™ï¼Œä¼¼ä¹èƒ½æ‰“å¼€æŸä¸ªç¥ç§˜ä¹‹é—¨..."
                        ];
                        const randomTreasure = treasures[Math.floor(Math.random() * treasures.length)];
                        resolve(randomTreasure);
                    }, 2000);
                });
            }

            // æ–°å¢æ–¹æ³•ï¼šé‡åˆ°éšæœºäº‹ä»¶
            static randomEvent() {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const events = [
                            "åœ¨è·¯ä¸Šä½ é‡åˆ°äº†ä¸€ä½ç¥ç§˜çš„æ—…è¡Œè€…ï¼Œä»–ç»™äº†ä½ ä¸€äº›æœ‰ç”¨çš„å»ºè®®...",
                            "çªç„¶ä¸‹èµ·äº†æš´é›¨ï¼Œä½ ä¸å¾—ä¸æ‰¾ä¸ªåœ°æ–¹èº²é¿ï¼Œè€½è¯¯äº†ä¸€äº›æ—¶é—´...",
                            "ä½ å‘ç°äº†ä¸€æ¡æ·å¾„ï¼ŒèŠ‚çœäº†ä¸å°‘æ—¶é—´!",
                            "ä½ åœ¨è·¯ä¸Šæ¡åˆ°äº†ä¸€ä»¶æœ‰ç”¨çš„å·¥å…·ï¼Œå¯èƒ½ä¼šåœ¨åç»­æ¢ç´¢ä¸­æ´¾ä¸Šç”¨åœº..."
                        ];
                        const randomEvent = events[Math.floor(Math.random() * events.length)];
                        resolve(randomEvent);
                    }, 1500);
                });
            }
        }

        // ç”¨æˆ·ç®¡ç†ç»„ä»¶
        const UserManagement = {
            template: `
                <div class="user-management">
                    <h2>ç”¨æˆ·ç®¡ç†</h2>
                    <div v-if="!currentUser" class="form-group">
                        <label>ç”¨æˆ·å</label>
                        <input type="text" v-model="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
                        <button @click="login" style="margin-top: 15px; width: 100%;">ç™»å½•/æ³¨å†Œ</button>
                    </div>
                    <div v-else>
                        <div class="user-info" style="justify-content: center; margin-bottom: 30px;">
                            <div class="avatar">{{ currentUser.avatar }}</div>
                            <div>
                                <h3>{{ currentUser.username }}</h3>
                                <p>æ³¨å†Œæ—¶é—´: {{ formatDate(currentUser.registrationDate) }}</p>
                            </div>
                        </div>
                        
                        <div class="user-stats">
                            <div class="stat-card">
                                <div class="stat-value">{{ userStats.completedGames }}</div>
                                <div class="stat-label">å®Œæˆæ¸¸æˆ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ userStats.totalScore }}</div>
                                <div class="stat-label">æ€»å¾—åˆ†</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ userStats.bestTime }}s</div>
                                <div class="stat-label">æœ€å¿«é€šå…³</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ userStats.rank }}</div>
                                <div class="stat-label">å½“å‰æ’å</div>
                            </div>
                        </div>
                        
                        <button @click="logout" style="margin-top: 30px; width: 100%;">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
            `,
            setup() {
                const username = ref('');
                const currentUser = ref(null);
                const userStats = ref({
                    completedGames: 0,
                    totalScore: 0,
                    bestTime: 0,
                    rank: 0
                });

                const login = () => {
                    if (username.value.trim()) {
                        // æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•
                        currentUser.value = {
                            username: username.value,
                            avatar: username.value.charAt(0).toUpperCase(),
                            registrationDate: new Date()
                        };

                        // æ¨¡æ‹Ÿè·å–ç”¨æˆ·æ•°æ®
                        userStats.value = {
                            completedGames: Math.floor(Math.random() * 20),
                            totalScore: Math.floor(Math.random() * 1000),
                            bestTime: Math.floor(Math.random() * 300),
                            rank: Math.floor(Math.random() * 100) + 1
                        };

                        username.value = '';
                    }
                };

                const logout = () => {
                    currentUser.value = null;
                };

                const formatDate = (date) => {
                    return date.toLocaleDateString('zh-CN');
                };

                return {
                    username,
                    currentUser,
                    userStats,
                    login,
                    logout,
                    formatDate
                };
            }
        };

        // æ’è¡Œæ¦œç»„ä»¶
        const Leaderboard = {
            template: `
                <div class="leaderboard">
                    <div class="leaderboard-header">
                        <h2>å¯»å®è‹±é›„æ¦œ</h2>
                        <p>çœ‹çœ‹è°æ˜¯æœ€å‰å®³çš„å¯»å®è€…</p>
                    </div>
                    
                    <div class="leaderboard-list">
                        <div 
                            v-for="(user, index) in leaderboard" 
                            :key="user.id" 
                            class="leaderboard-item"
                            :class="'top-' + (index + 1)"
                        >
                            <div class="leaderboard-rank">{{ index + 1 }}</div>
                            <div class="leaderboard-user">
                                <div class="avatar">{{ user.avatar }}</div>
                                <div>
                                    <div>{{ user.username }}</div>
                                    <div style="font-size: 0.8rem; opacity: 0.7;">{{ user.region }}</div>
                                </div>
                            </div>
                            <div class="leaderboard-score">{{ user.score }} åˆ†</div>
                        </div>
                    </div>
                </div>
            `,
            setup() {
                const leaderboard = ref([]);

                // æ¨¡æ‹Ÿæ’è¡Œæ¦œæ•°æ®
                const generateLeaderboard = () => {
                    const names = ['å¯»å®è€…', 'å†’é™©å®¶', 'æ¢é™©å®¶', 'è€ƒå¤å­¦å®¶', 'å®è—çŒäºº', 'ç¥ç§˜æ—…è€…'];
                    const regions = ['ä¸œæ–¹å¤§é™†', 'è¥¿éƒ¨è’é‡', 'å—æ–¹ç¾¤å²›', 'åŒ—æ–¹é›ªåŸ', 'ä¸­å¤®å¹³åŸ'];

                    return Array.from({ length: 10 }, (_, i) => ({
                        id: i + 1,
                        username: `${names[i % names.length]}${i + 1}`,
                        avatar: names[i % names.length].charAt(0),
                        region: regions[i % regions.length],
                        score: 1000 - i * 80 + Math.floor(Math.random() * 50)
                    })).sort((a, b) => b.score - a.score);
                };

                onMounted(() => {
                    leaderboard.value = generateLeaderboard();
                });

                return {
                    leaderboard
                };
            }
        };

        // æ¸¸æˆè¿›åº¦ç»„ä»¶
        const GameProgress = {
            template: `
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" :style="{ width: progress + '%' }"></div>
                    </div>
                    <div class="progress-text">{{ progressText }}</div>
                </div>
            `,
            props: {
                progress: {
                    type: Number,
                    default: 0
                },
                progressText: {
                    type: String,
                    default: 'å‡†å¤‡å¼€å§‹å¯»å®...'
                }
            }
        };

        // æ¸¸æˆæ­¥éª¤ç»„ä»¶
        const GameStep = {
            template: `
                <div class="step-card" :class="stepClass">
                    <div class="step-header">
                        <div class="step-icon">{{ stepNumber }}</div>
                        <div class="step-title">{{ title }}</div>
                    </div>
                    <div class="step-content">
                        {{ content }}
                    </div>
                    <div class="step-status">{{ status }}</div>
                </div>
            `,
            props: {
                stepNumber: {
                    type: Number,
                    required: true
                },
                title: {
                    type: String,
                    required: true
                },
                content: {
                    type: String,
                    required: true
                },
                status: {
                    type: String,
                    default: 'ç­‰å¾…å¼€å§‹'
                },
                isActive: {
                    type: Boolean,
                    default: false
                },
                isCompleted: {
                    type: Boolean,
                    default: false
                },
                isFailed: {
                    type: Boolean,
                    default: false
                }
            },
            computed: {
                stepClass() {
                    return {
                        'active': this.isActive,
                        'completed': this.isCompleted,
                        'failed': this.isFailed
                    };
                }
            }
        };

        // æ¸¸æˆæ—¥å¿—ç»„ä»¶
        const GameLog = {
            template: `
                <div class="event-log">
                    <h3>å†’é™©æ—¥å¿—</h3>
                    <div id="log-entries">
                        <div 
                            v-for="entry in logEntries" 
                            :key="entry.id" 
                            class="log-entry"
                            :style="{ color: entry.isError ? '#ff6b6b' : 'inherit' }"
                        >
                            [{{ entry.time }}] {{ entry.message }}
                        </div>
                    </div>
                </div>
            `,
            props: {
                logEntries: {
                    type: Array,
                    default: () => []
                }
            }
        };

        // æ¸¸æˆç»“æœç»„ä»¶
        const GameResult = {
            template: `
                <div class="treasure-result" v-if="show" :style="{ background: resultBackground }">
                    <div class="treasure-image">ğŸ’</div>
                    <h2>{{ title }}</h2>
                    <p>{{ description }}</p>
                </div>
            `,
            props: {
                show: {
                    type: Boolean,
                    default: false
                },
                success: {
                    type: Boolean,
                    default: false
                },
                title: {
                    type: String,
                    default: ''
                },
                description: {
                    type: String,
                    default: ''
                }
            },
            computed: {
                resultBackground() {
                    return this.success ? 'rgba(46, 204, 113, 0.3)' : 'rgba(231, 76, 60, 0.3)';
                }
            }
        };

        // æ¸¸æˆä¸»ç»„ä»¶
        const TreasureGame = {
            template: `
                <div class="game-area">
                    <GameProgress :progress="progress" :progress-text="progressText" />
                    
                    <div class="steps-container">
                        <GameStep
                            v-for="step in steps"
                            :key="step.number"
                            :step-number="step.number"
                            :title="step.title"
                            :content="step.content"
                            :status="step.status"
                            :is-active="step.isActive"
                            :is-completed="step.isCompleted"
                            :is-failed="step.isFailed"
                        />
                    </div>
                    
                    <div class="controls">
                        <button @click="startAdventure" :disabled="isRunning">å¼€å§‹å¯»å®</button>
                        <button @click="resetGame" :disabled="!isRunning && progress === 0">é‡æ–°å¼€å§‹</button>
                    </div>
                    
                    <GameResult
                        :show="showResult"
                        :success="gameSuccess"
                        :title="resultTitle"
                        :description="resultDescription"
                    />
                    
                    <GameLog :log-entries="logEntries" />
                </div>
            `,
            components: {
                GameProgress,
                GameStep,
                GameLog,
                GameResult
            },
            setup() {
                const progress = ref(0);
                const progressText = ref('å‡†å¤‡å¼€å§‹å¯»å®...');
                const isRunning = ref(false);
                const showResult = ref(false);
                const gameSuccess = ref(false);
                const resultTitle = ref('');
                const resultDescription = ref('');
                const logEntries = ref([]);

                const steps = ref([
                    {
                        number: 1,
                        title: 'å¯»æ‰¾åˆå§‹çº¿ç´¢',
                        content: 'åœ¨å¤è€çš„å›¾ä¹¦é¦†ä¸­å¯»æ‰¾å…³äºå®è—çš„ç¬¬ä¸€ä¸ªçº¿ç´¢...',
                        status: 'ç­‰å¾…å¼€å§‹',
                        isActive: false,
                        isCompleted: false,
                        isFailed: false
                    },
                    {
                        number: 2,
                        title: 'è§£ç å¤è€æ–‡å­—',
                        content: 'ä½¿ç”¨å¤è€çš„è§£ç å™¨ç ´è¯‘çº¿ç´¢ä¸­çš„ç¥ç§˜æ–‡å­—...',
                        status: 'å°šæœªå¼€å§‹',
                        isActive: false,
                        isCompleted: false,
                        isFailed: false
                    },
                    {
                        number: 3,
                        title: 'æ¢ç´¢ç¥åº™',
                        content: 'æ ¹æ®çº¿ç´¢å‰å¾€å¤è€ç¥åº™ï¼Œä½†è¦å°å¿ƒå®ˆå«...',
                        status: 'å°šæœªå¼€å§‹',
                        isActive: false,
                        isCompleted: false,
                        isFailed: false
                    },
                    {
                        number: 4,
                        title: 'æ‰“å¼€å®ç®±',
                        content: 'æ‰¾åˆ°ç¥ç§˜çš„å®ç®±å¹¶å°è¯•æ‰“å¼€å®ƒ...',
                        status: 'å°šæœªå¼€å§‹',
                        isActive: false,
                        isCompleted: false,
                        isFailed: false
                    }
                ]);

                const totalSteps = computed(() => steps.value.length);

                const updateProgress = (step, text) => {
                    const newProgress = ((step - 1) / totalSteps.value) * 100;
                    progress.value = newProgress;
                    progressText.value = text;
                };

                const setStepActive = (stepNumber) => {
                    // é‡ç½®æ‰€æœ‰æ­¥éª¤çŠ¶æ€
                    steps.value.forEach(step => {
                        step.isActive = false;
                    });

                    // è®¾ç½®å½“å‰æ­¥éª¤ä¸ºæ´»åŠ¨çŠ¶æ€
                    const currentStep = steps.value.find(step => step.number === stepNumber);
                    if (currentStep) {
                        currentStep.isActive = true;
                        currentStep.status = 'è¿›è¡Œä¸­...';
                    }
                };

                const setStepCompleted = (stepNumber) => {
                    const step = steps.value.find(step => step.number === stepNumber);
                    if (step) {
                        step.isActive = false;
                        step.isCompleted = true;
                        step.status = 'å®Œæˆ!';
                    }
                };

                const setStepFailed = (stepNumber) => {
                    const step = steps.value.find(step => step.number === stepNumber);
                    if (step) {
                        step.isActive = false;
                        step.isFailed = true;
                        step.status = 'å¤±è´¥!';
                    }
                };

                const addLog = (message, isError = false) => {
                    logEntries.value.push({
                        id: Date.now() + Math.random(),
                        time: new Date().toLocaleTimeString(),
                        message,
                        isError
                    });
                };

                const showGameResult = (success, title, description) => {
                    progress.value = 100;
                    progressText.value = success ? 'å¯»å®æˆåŠŸ!' : 'å¯»å®å¤±è´¥';

                    gameSuccess.value = success;
                    resultTitle.value = title;
                    resultDescription.value = description;
                    showResult.value = true;
                };

                const resetGame = () => {
                    progress.value = 0;
                    progressText.value = 'å‡†å¤‡å¼€å§‹å¯»å®...';
                    isRunning.value = false;
                    showResult.value = false;
                    logEntries.value = [];

                    steps.value.forEach(step => {
                        step.isActive = false;
                        step.isCompleted = false;
                        step.isFailed = false;
                        step.status = step.number === 1 ? 'ç­‰å¾…å¼€å§‹' : 'å°šæœªå¼€å§‹';
                    });
                };

                const executeStep = async (stepNumber, statusText, stepFunction) => {
                    // æ›´æ–°UI
                    updateProgress(stepNumber, statusText);
                    setStepActive(stepNumber);

                    try {
                        const result = await stepFunction();
                        setStepCompleted(stepNumber);
                        return result;
                    } catch (error) {
                        setStepFailed(stepNumber);
                        throw error;
                    }
                };

                const randomEvent = async () => {
                    // 50%å‡ ç‡è§¦å‘éšæœºäº‹ä»¶
                    if (Math.random() < 0.5) {
                        addLog('éšæœºäº‹ä»¶å‘ç”Ÿ...');
                        const event = await TreasureMap.randomEvent();
                        addLog('äº‹ä»¶: ' + event);

                        // æ·»åŠ ä¸€ç‚¹å»¶è¿Ÿæ¥æ¨¡æ‹Ÿäº‹ä»¶å¤„ç†æ—¶é—´
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    }
                };

                const startAdventure = async () => {
                    if (isRunning.value) return;

                    isRunning.value = true;
                    showResult.value = false;
                    logEntries.value = [];

                    try {
                        // æ­¥éª¤1: è·å–åˆå§‹çº¿ç´¢
                        await executeStep(1, 'æ­£åœ¨å›¾ä¹¦é¦†ä¸­å¯»æ‰¾çº¿ç´¢...', async () => {
                            const clue = await TreasureMap.getInitialClue();
                            addLog('æ‰¾åˆ°äº†çº¿ç´¢: ' + clue);
                            return clue;
                        });

                        // éšæœºäº‹ä»¶
                        await randomEvent();

                        // æ­¥éª¤2: è§£ç å¤è€æ–‡å­—
                        await executeStep(2, 'æ­£åœ¨è§£ç å¤è€æ–‡å­—...', async () => {
                            const decoded = await TreasureMap.decodeAncientScript('åœ°å›¾çº¿ç´¢');
                            addLog('è§£ç ç»“æœ: ' + decoded);
                            return decoded;
                        });

                        // éšæœºäº‹ä»¶
                        await randomEvent();

                        // æ­¥éª¤3: æ¢ç´¢ç¥åº™
                        await executeStep(3, 'æ­£åœ¨æ¢ç´¢ç¥åº™...', async () => {
                            const templeResult = await TreasureMap.searchTemple('æœˆå…‰ç¥åº™');
                            addLog('ç¥åº™æ¢ç´¢: ' + templeResult);
                            return templeResult;
                        });

                        // éšæœºäº‹ä»¶
                        await randomEvent();

                        // æ­¥éª¤4: æ‰“å¼€å®ç®±
                        await executeStep(4, 'æ­£åœ¨æ‰“å¼€å®ç®±...', async () => {
                            const treasure = await TreasureMap.openTreasureBox();
                            addLog('å®ç®±å†…å®¹: ' + treasure);
                            return treasure;
                        });

                        // å¯»å®æˆåŠŸ
                        showGameResult(true, 'æ­å–œï¼å¯»å®æˆåŠŸï¼', 'ç»è¿‡é‡é‡å›°éš¾ï¼Œä½ ç»ˆäºæ‰¾åˆ°äº†ä¼ è¯´ä¸­çš„å®è—ï¼');

                    } catch (error) {
                        addLog('é”™è¯¯: ' + error, true);
                        showGameResult(false, 'å¯»å®å¤±è´¥', 'å¾ˆé—æ†¾ï¼Œè¿™æ¬¡å¯»å®æ²¡æœ‰æˆåŠŸã€‚åŸå› : ' + error);
                    } finally {
                        isRunning.value = false;
                    }
                };

                return {
                    progress,
                    progressText,
                    isRunning,
                    showResult,
                    gameSuccess,
                    resultTitle,
                    resultDescription,
                    logEntries,
                    steps,
                    startAdventure,
                    resetGame
                };
            }
        };

        // ä¸»åº”ç”¨ç»„ä»¶
        const App = {
            template: `
                <div class="container">
                    <div class="navbar">
                        <div class="nav-brand">
                            <span>ğŸ´â€â˜ ï¸</span>
                            <span>Vueå¯»å®å†’é™©</span>
                        </div>
                        <div class="nav-links">
                            <div 
                                v-for="page in pages" 
                                :key="page.id"
                                class="nav-link"
                                :class="{ active: currentPage === page.id }"
                                @click="switchPage(page.id)"
                            >
                                {{ page.name }}
                            </div>
                        </div>
                        <div class="user-info">
                            <div class="avatar">V</div>
                            <div>Vueæ¢é™©å®¶</div>
                        </div>
                    </div>
                    
                    <div class="page-container">
                        <TreasureGame v-if="currentPage === 'game'" />
                        <UserManagement v-else-if="currentPage === 'user'" />
                        <Leaderboard v-else-if="currentPage === 'leaderboard'" />
                    </div>
                </div>
            `,
            components: {
                TreasureGame,
                UserManagement,
                Leaderboard
            },
            setup() {
                const pages = [
                    { id: 'game', name: 'å¯»å®æ¸¸æˆ' },
                    { id: 'user', name: 'ç”¨æˆ·ç®¡ç†' },
                    { id: 'leaderboard', name: 'æ’è¡Œæ¦œ' }
                ];

                const currentPage = ref('game');

                const switchPage = (pageId) => {
                    currentPage.value = pageId;
                };

                return {
                    pages,
                    currentPage,
                    switchPage
                };
            }
        };

        // åˆ›å»ºVueåº”ç”¨
        createApp(App).mount('#app');
    </script>
</body>

</html>